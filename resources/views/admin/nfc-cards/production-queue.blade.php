@extends('layouts.admin') @section('content')
<div class="px-4 sm:px-6 lg:px-8 py-8"> <div class="sm:flex sm:items-center"> <div class="sm:flex-auto"> <h1 class="text-2xl font-semibold text-gray-900">NFC Card Production Queue</h1> <p class="mt-2 text-sm text-gray-700"> Manage NFC card production, shipping, and fulfillment </p> </div> </div> <!-- Status Filter --> <div class="mt-6 bg-white shadow rounded-lg p-4"> <form method="GET" class="flex flex-wrap gap-2"> <a href="?status=all" class="inline-flex items-center px-3 py-2 border {{ request('status', 'all') === 'all' ? 'border-indigo-500 bg-indigo-50 text-indigo-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> All ({{ $statusCounts['all'] }}) </a> <a href="?status=pending_production" class="inline-flex items-center px-3 py-2 border {{ request('status') === 'pending_production' ? 'border-yellow-500 bg-yellow-50 text-yellow-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> Pending ({{ $statusCounts['pending_production'] }}) </a> <a href="?status=in_production" class="inline-flex items-center px-3 py-2 border {{ request('status') === 'in_production' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> In Production ({{ $statusCounts['in_production'] }}) </a> <a href="?status=produced" class="inline-flex items-center px-3 py-2 border {{ request('status') === 'produced' ? 'border-purple-500 bg-purple-50 text-purple-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> Produced ({{ $statusCounts['produced'] }}) </a> <a href="?status=shipped" class="inline-flex items-center px-3 py-2 border {{ request('status') === 'shipped' ? 'border-indigo-500 bg-indigo-50 text-indigo-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> Shipped ({{ $statusCounts['shipped'] }}) </a> <a href="?status=delivered" class="inline-flex items-center px-3 py-2 border {{ request('status') === 'delivered' ? 'border-green-500 bg-green-50 text-green-700' : 'border-gray-300 bg-white text-gray-700' }} rounded-md text-sm font-medium"> Delivered ({{ $statusCounts['delivered'] }}) </a> </form> </div> <!-- Cards Table --> <div class="mt-6 flow-root"> <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"> <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"> <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"> <table class="min-w-full divide-y divide-gray-300"> <thead class="bg-gray-50"> <tr> <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"> Card # </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Order </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Customer </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Profile </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Color </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Printing </th> <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900"> Status </th> <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6"> <span class="sr-only">Actions</span> </th> </tr> </thead> <tbody class="divide-y divide-gray-200 bg-white"> @forelse($nfcCards as $card) <tr> <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"> {{ $card->card_number }} </td> <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500"> <a href="{{ route('admin.orders.show', $card->order_id) }}" class="text-indigo-600 hover:text-indigo-900"> #{{ $card->order_id }} </a> </td> <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500"> {{ $card->user->name }} </td> <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500"> <a href="{{ $card->profile->public_url }}" target="_blank" class="text-indigo-600 hover:text-indigo-900"> {{ $card->profile->profile_name ?? $card->profile->slug }} </a> </td> <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500"> <span class="capitalize">{{ $card->card_color }}</span> </td> <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500"> @if($card->requires_printing) <span class="inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800"> {{ $card->printing_text['text'] ?? 'Yes' }} </span> @else <span class="text-gray-400">Plain</span> @endif </td> <td class="whitespace-nowrap px-3 py-4 text-sm"> <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-{{ $card->status_badge_color }}-100 text-{{ $card->status_badge_color }}-800 $card->status_badge_color }}-900/20 $card->status_badge_color }}-400"> {{ $card->status_display }} </span> </td> <td class="relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"> <div class="flex justify-end gap-2"> @if($card->status === 'pending_production') <form method="POST" action="{{ route('admin.nfc-cards.start-production', $card) }}" class="inline"> @csrf <button type="submit" class="text-indigo-600 hover:text-indigo-900"> Start </button> </form> @elseif($card->status === 'in_production') <form method="POST" action="{{ route('admin.nfc-cards.mark-produced', $card) }}" class="inline"> @csrf <button type="submit" class="text-green-600 hover:text-green-900"> Mark Produced </button> </form> @elseif($card->status === 'produced') <button onclick="openShipModal({{ $card->id }})" class="text-blue-600 hover:text-blue-900"> Ship </button> @elseif($card->status === 'shipped') <span class="text-gray-500">{{ $card->tracking_number }}</span> @endif <a href="{{ route('admin.nfc-cards.show', $card) }}" class="text-gray-600 hover:text-gray-900"> View </a> </div> </td> </tr> @empty <tr> <td colspan="8" class="px-3 py-12 text-center text-sm text-gray-500"> No NFC cards found </td> </tr> @endforelse </tbody> </table> </div> </div> </div> </div> <!-- Pagination --> <div class="mt-6"> {{ $nfcCards->links() }} </div>
</div> <!-- Ship Modal (simplified - enhance as needed) -->
<div id="shipModal" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"> <div class="bg-white rounded-lg p-6 max-w-md w-full"> <h3 class="text-lg font-medium text-gray-900 mb-4">Ship Card</h3> <form id="shipForm" method="POST"> @csrf <div class="mb-4"> <label for="tracking_number" class="block text-sm font-medium text-gray-700 mb-2"> Tracking Number </label> <input type="text" name="tracking_number" id="tracking_number" required class="w-full rounded-md border-gray-300"> </div> <div class="flex justify-end gap-2"> <button type="button" onclick="closeShipModal()" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700"> Cancel </button> <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"> Ship Card </button> </div> </form> </div>
</div> <script> function openShipModal(cardId) { document.getElementById('shipForm').action = `/admin/nfc-cards/${cardId}/ship`; document.getElementById('shipModal').classList.remove('hidden'); } function closeShipModal() { document.getElementById('shipModal').classList.add('hidden'); }
</script>
@endsection 