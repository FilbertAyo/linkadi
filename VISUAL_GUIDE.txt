================================================================================
                    LINKADI STORAGE FIX - VISUAL GUIDE
================================================================================

                            YOUR PROBLEM
                            ============

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Old images show âœ…                                      â”‚
    â”‚  (after copying from linkadi-web/storage/app/public/)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 BUT
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  New uploads don't save âŒ                               â”‚
    â”‚  (when you try to update/change image)                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                            THE CAUSE
                            =========

    You used permission 755, but web server needs 775 to write!

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   755 (WRONG)        â”‚         â”‚   775 (CORRECT)      â”‚
    â”‚                      â”‚         â”‚                      â”‚
    â”‚   drwxr-xr-x         â”‚         â”‚   drwxrwxr-x         â”‚
    â”‚        â†‘             â”‚         â”‚        â†‘             â”‚
    â”‚   No 'w' here!       â”‚         â”‚   Has 'w' here!      â”‚
    â”‚   Web server         â”‚         â”‚   Web server         â”‚
    â”‚   can't write âŒ     â”‚         â”‚   can write âœ…       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                            THE SOLUTION
                            ============

    Run ONE command on your server:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  chmod -R 775 public_html/storage                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    That's it! Problem solved! ğŸ‰


================================================================================
                        STEP-BY-STEP INSTRUCTIONS
================================================================================

OPTION 1: QUICK FIX (30 seconds)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. SSH into your server:
   
   ssh linkadic@your-server.com

2. Run these commands:

   chmod -R 775 public_html/storage
   cd linkadi-web && php artisan config:clear && cd ~

3. Test upload - DONE! âœ…


OPTION 2: COMPLETE SETUP (5 minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. SSH into your server:
   
   ssh linkadic@your-server.com

2. Copy and paste these commands:

   cd ~
   mkdir -p public_html/storage/{profile-images,company-logos,cover-images,packages,qr-codes}
   cp -R linkadi-web/storage/app/public/* public_html/storage/ 2>/dev/null || true
   chmod -R 775 public_html/storage
   chown -R linkadic:linkadic public_html/storage
   cd linkadi-web && php artisan config:clear && php artisan cache:clear && cd ~

3. Test upload - DONE! âœ…


OPTION 3: AUTOMATED SCRIPT (easiest)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Upload RUN_THESE_COMMANDS.sh to your server

2. SSH into your server:
   
   ssh linkadic@your-server.com

3. Run the script:

   chmod +x RUN_THESE_COMMANDS.sh
   ./RUN_THESE_COMMANDS.sh

4. Test upload - DONE! âœ…


================================================================================
                            VERIFICATION
================================================================================

After running the fix, verify it worked:

1. Check permissions:
   
   ls -ld public_html/storage/
   
   âœ… Should show: drwxrwxr-x (note the 'w' in the middle!)
   âŒ If shows: drwxr-xr-x (run chmod again)


2. Test write access:
   
   touch public_html/storage/test.txt
   
   âœ… If succeeds: Permissions are correct!
   âŒ If fails: Run chmod -R 775 public_html/storage again


3. Test on website:
   
   a. Go to: https://linkadi.co.tz
   b. Navigate to profile builder
   c. Upload a profile image
   d. Click save
   
   âœ… Image displays immediately: SUCCESS!
   âŒ Image doesn't show: Run diagnose-storage.sh


================================================================================
                        WHAT HAPPENS NOW
================================================================================

BEFORE FIX (755 permissions):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    User uploads image
         â†“
    Laravel tries to save
         â†“
    Permission check: 755
         â†“
    Web server can't write âŒ
         â†“
    Upload fails silently
         â†“
    User sees old/no image


AFTER FIX (775 permissions):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    User uploads image
         â†“
    Laravel tries to save
         â†“
    Permission check: 775
         â†“
    Web server can write âœ…
         â†“
    File saved successfully
         â†“
    User sees new image! ğŸ‰


================================================================================
                        FILE LOCATIONS
================================================================================

After setup, your files are stored here:

    /home/linkadic/public_html/storage/
    â”œâ”€â”€ profile-images/     (user profile pictures)
    â”œâ”€â”€ company-logos/      (company logos)
    â”œâ”€â”€ cover-images/       (profile cover images)
    â”œâ”€â”€ packages/           (package images - admin)
    â””â”€â”€ qr-codes/           (generated QR codes)

And accessible at these URLs:

    https://linkadi.co.tz/storage/profile-images/filename.jpg
    https://linkadi.co.tz/storage/company-logos/filename.jpg
    https://linkadi.co.tz/storage/cover-images/filename.jpg
    https://linkadi.co.tz/storage/packages/filename.jpg
    https://linkadi.co.tz/storage/qr-codes/filename.png


================================================================================
                        TROUBLESHOOTING
================================================================================

PROBLEM: Still can't upload
SOLUTION: Check permissions

    ls -ld public_html/storage/
    
    If shows drwxr-xr-x (755):
        chmod -R 775 public_html/storage


PROBLEM: Subdirectories missing
SOLUTION: Create them

    mkdir -p public_html/storage/{profile-images,company-logos,cover-images,packages,qr-codes}


PROBLEM: Cache not cleared
SOLUTION: Clear it

    cd linkadi-web
    php artisan config:clear
    php artisan cache:clear


PROBLEM: Still not working
SOLUTION: Run diagnostic

    chmod +x diagnose-storage.sh
    ./diagnose-storage.sh


================================================================================
                        HELPFUL FILES
================================================================================

ğŸ“„ START_HERE.md
   â†’ Main entry point, read this first

ğŸ“„ QUICK_FIX_COMMANDS.txt
   â†’ Copy-paste commands for instant fix

ğŸ“„ UNDERSTANDING_THE_PROBLEM.md
   â†’ Visual explanation of why this happens

ğŸ“„ README_STORAGE_SETUP.md
   â†’ Complete documentation

ğŸ”§ RUN_THESE_COMMANDS.sh
   â†’ Automated fix script

ğŸ”§ diagnose-storage.sh
   â†’ Diagnostic tool to identify issues

ğŸ“‹ DEPLOYMENT_CHECKLIST.md
   â†’ Step-by-step deployment checklist


================================================================================
                        QUICK REFERENCE
================================================================================

Fix permissions:        chmod -R 775 public_html/storage
Clear cache:            cd linkadi-web && php artisan config:clear
Check permissions:      ls -ld public_html/storage/
Test write:             touch public_html/storage/test.txt
Run diagnostic:         ./diagnose-storage.sh
View logs:              tail -f linkadi-web/storage/logs/laravel.log


================================================================================
                        REMEMBER
================================================================================

âœ… Use 775 (not 755) for web-writable directories
âœ… Clear cache after config changes
âœ… Test all upload features after deployment
âœ… Never use php artisan storage:link with this setup

âŒ Don't use 755 (web server can't write)
âŒ Don't use 777 (security risk)
âŒ Don't forget to clear cache


================================================================================
                        YOU'RE READY!
================================================================================

1. Choose an option above (Quick Fix, Complete Setup, or Automated)
2. Run the commands on your server
3. Test uploading an image
4. Enjoy working uploads! ğŸ‰

Questions? Check START_HERE.md or README_STORAGE_SETUP.md

================================================================================
